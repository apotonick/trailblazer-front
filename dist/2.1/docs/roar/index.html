<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <title>Roar - Trailblazer</title>
    <meta content="width=device-width,initial-scale=1" name="viewport"/>
    
    
    <link rel="stylesheet" href="/assets/tailwind-914b585a1032d1c77ff556e21fa0328e6290facaaf59e55a32c76dff28c9440f.css" />
<link rel="stylesheet" href="/assets/inter-font-8c3e82affb176f4bca9616b838d906343d1251adc8408efe02cf2b1e4fcf2bc4.css" />
    <link rel="stylesheet" href="/assets/application-310dcc5a1b481848e13ba1754e61e604e78b93397b1fc9733d759bc567c6e4c4.css" />
    <script>pageIdentifier = "docs";</script>
    <script type="importmap" data-turbo-track="reload">{
  "imports": {
    "application": "/assets/application-a761672f487e42651e347663dab98f5626ca4ebb9cdd0a3460b3e75de647b0ab.js",
    "anchor-js": "/assets/anchor-js-821952d04abcd941bb3541822cd1c1f0234e5168bef1f9b2a050868af608aa5a.js",
    "navigations": "/assets/navigations-27f57ba888008b48256d2635e15bd2f0be7a039b32c8e84140da87596cbf9547.js",
    "highlight.js/lib/core": "/assets/highlight.js--lib--core-d83dc99104442fb344c757a56d28fa888edee01ed7e6dad88a445f7c7ec6d4c9.js",
    "highlight.js/lib/languages/ruby": "/assets/highlight.js--lib--languages--ruby-f74e4cf7cb12132c4f16865b466beac81cd62a84a8119ebf005060b9d5945175.js",
    "jquery": "/assets/jquery-9292661fe0d8c5ef2ef35f5ca64d541d70c87e9f6d7f2716d646591a295b7f36.js",
    "jquery.parallax-scroll": "/assets/jquery.parallax-scroll-a50d2125650d18a234bc9a3eea0a0f1c40871f3ccfba877d0eae70e690955825.js",
    "lottie-player": "/assets/lottie-player-e6cb02cb41d855528f04877264526693c3c897f0264ed3fc91d60fd14ab3529b.js",
    "docsearch": "/assets/docsearch-6a9e3b901da8b6299bb0d2b79e2089a6adf093a79c2cffbfb687b00ea0db3f81.js",
    "docsearch-3.5.2": "/assets/docsearch-3.5.2-3565e3facc916843f7e785300604336389a47920c444394e60c157e2afaa179a.js"
  }
}</script>
<link rel="modulepreload" href="/assets/application-a761672f487e42651e347663dab98f5626ca4ebb9cdd0a3460b3e75de647b0ab.js">
<link rel="modulepreload" href="/assets/anchor-js-821952d04abcd941bb3541822cd1c1f0234e5168bef1f9b2a050868af608aa5a.js">
<script src="/assets/es-module-shims.min-4ca9b3dd5e434131e3bb4b0c1d7dff3bfd4035672a5086deec6f73979a49be73.js" async="async" data-turbo-track="reload"></script>
<script type="module">import "application"</script>
  </head>
  <body>
    <nav class=" text-base z-[50] top-0 absolute w-full lg:h-[5.5rem] lg:px-[5.6rem] py-3 lg:flex lg:justify-between lg:items-center bg-white sticky" id="navbar">
  <a href="/2.1" class="block shrink-0 w-fit mx-auto lg:mx-0">
    <img class="w-40 lg:my-0" src="/assets/logo_blue_ruby-e87334a67ff20033fae8c8d2c07e549b5f1faa9b75bb07fbb2ff9d1c0dfef6e7.svg" />
  </a>
  <div class="lg:hidden absolute right-4 top-2 flex w-9 h-9 items-center" id="hamburgerIcon">
    <div class="pointer-events-none w-full h-0.5 bg-blue transition-all duration-150
                  before:content-[''] before:absolute before:w-full before:h-0.5 before:bg-blue before:-translate-y-2.5 before:transition-all before:duration-150
                  after:content-[''] after:absolute after:w-full after:h-0.5 after:bg-blue after:translate-y-2.5 after:transition-all after:duration-150"></div>
  </div>
  <div class="lg:hidden flex flex-col text-center hidden" id="navList">
    <div class="lg:absolute flex flex-col mt-15 gap-10 uppercase">
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="/2.1/docs/trailblazer">Documentation</a>
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="https://dev.to/trailblazer">Blog</a>
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="/2.1/about.html">About</a>
      
      <!-- <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="/2.1/pro.html">PRO</a> -->
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="https://trailblazer.zulipchat.com">Chat with us</a>
    </div>
  </div>
  <div class="lg:flex hidden gap-10 items-center">
    <div class="flex gap-7">
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold underline decoration-[5px] underline-offset-[15px] decoration-purple hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="/2.1/docs/trailblazer">Documentation</a>
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="https://dev.to/trailblazer">Blog</a>
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="/2.1/about.html">About</a>
      <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="/2.0/">→ 2.0</a>
      
      <!-- <a class="font-medium text-base uppercase lg:normal-case lg:font-semibold  hover:underline hover:decoration-[5px] hover:underline-offset-[15px] hover:decoration-purple " href="/2.1/pro.html">PRO</a> -->
    </div>

    <a class="base-button text-base w-[12.5rem] h-[3.25rem] bg-light-purple text-blue hover:text-white hover:bg-purple" href="https://trailblazer.zulipchat.com">Chat with us</a>
  </div>
</nav>

<section>
  <div class="lg:hidden bg-bg-blue text-white fixed left-0 top-20 pr-1 py-3 rounded-r" id="sideNavShowButton" style="writing-mode: vertical-rl; text-orientation: upright;">
    Chapters
  </div>
  <div class="lg:flex">
    <nav class="bg-bg-blue w-screen h-screen fixed top-0 z-20 right-[100vw] overflow-y-scroll lg:w-3/12 lg:max-w-[23rem] lg:overflow-y-visible lg:shrink-0 lg:sticky lg:top-[5.5rem]" id="sideNav">
      <button class="lg:hidden absolute right-4 top-4 text-3xl text-white" id="sideNavHideButton">
        X
      </button>
      <div class="lg:pt-10 lg:pl-5 xl:pl-20 p-10 pl-20 text-white leading-10 space-y-1 h-full overflow-auto">
  


  
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/trailblazer/index.html">Trailblazer</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/operation/index.html">Operation</a>

        

          

            
              <a href="/2.1/docs/activity/deprecated/index.html" class="" title="Deprecated activity docs: :input/:output, ...">
                
                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512" class="fill-grey pl-3 hover:fill-purple flex-inline"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M251.7 127.6l0 0c10.5 10.5 24.7 16.4 39.6 16.4H448c8.8 0 16 7.2 16 16v32H48V96c0-8.8 7.2-16 16-16H197.5c4.2 0 8.3 1.7 11.3 4.7l33.9-33.9L208.8 84.7l42.9 42.9zM48 240H464V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V240zM285.7 93.7L242.7 50.7c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H291.3c-2.1 0-4.2-.8-5.7-2.3z"/></svg>
                 
              </a>

            


          

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/rails_integration/index.html">Rails integration</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/test/index.html">Test</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col border-t-[1px] border-t-light-purple">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/macro/index.html">Macro</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/workflow/index.html">Workflow</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/endpoint/index.html">Endpoint</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/internals/index.html">Internals</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col border-t-[1px] border-t-light-purple">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/reform/index.html">Reform</a>

        

          

            

              <a href="/2.1/docs/reform/3.0/index.html" class="">
                <span class="h-5 text-[8pt] py-[3px] px-2 rounded-[8px] ml-3 hover:bg-purple hover:border-purple hover:text-white border border-grey text-grey">
                  3.0
                </span>
              </a>
            


          

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/cells/index.html">Cells</a>

        

          

            

              <a href="/2.1/docs/cells/5.0/index.html" class="">
                <span class="h-5 text-[8pt] py-[3px] px-2 rounded-[8px] ml-3 hover:bg-purple hover:border-purple hover:text-white border border-grey text-grey">
                  5.0
                </span>
              </a>
            


          

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/representable/index.html">Representable</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class=" flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/disposable/index.html">Disposable</a>

        
      </div>


      
    </div>

    
  
    <div class="flex flex-col ">
      <div class="bg-dark-purple flex items-center">
        <a class="pl-4 font-bold" href="/2.1/docs/roar/index.html">Roar</a>

        
      </div>


      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-basic-usage">
          <a href="#roar-basic-usage" class="pl-8">Basic Usage</a>
        </div>
      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-resource-objects">
          <a href="#roar-resource-objects" class="pl-8">Resource Objects</a>
        </div>
      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-attributes">
          <a href="#roar-attributes" class="pl-8">Attributes</a>
        </div>
      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-relationships">
          <a href="#roar-relationships" class="pl-8">Relationships</a>
        </div>
      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-member-names">
          <a href="#roar-member-names" class="pl-8">Member Names</a>
        </div>
      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-meta-information">
          <a href="#roar-meta-information" class="pl-8">Meta information</a>
        </div>
      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-compound-document">
          <a href="#roar-compound-document" class="pl-8">Compound Document</a>
        </div>
      
        
        <!-- FIXME: link should know its IDs. -->
        <div class="flex items-center" id="left-toc-roar-sparse-fieldsets">
          <a href="#roar-sparse-fieldsets" class="pl-8">Sparse Fieldsets</a>
        </div>
      
    </div>

    
  
</div>


    </nav>
    <div class="lg:p-10 pl-8 pr-4 py-10 bg-light-grey grow">
      <h1 class="lg:text-3xl text-2xl text-blue font-bold">
        <span class="py-1 px-3 border border rounded border border-white text-white bg-purple">2.1</span>
        <span class="font-black uppercase header-text">
          Roar
        </span>
        Documentation
      </h1>

      <div class="xl:flex xl:gap-0.5 mt-5">
        <div class="max-w-3xl lg:p-8 lg:pb-14 p-4 bg-white text-bg-blue space-y-9" id="documentation">
          <p class="">Roar JSON API supports rendering and parsing documents using the <a href="http://jsonapi.org/format/" class="underline text-purple">JSON API 1.0</a> specification.</p>

<div class="rounded flex p-4 gap-4 bg-bg-purple-1/50">
  <img src="/assets/info_icon-faf751d86d27155660995d9f129cfd3b63ce05a3a91e1acdda7d214f55bdb347.svg" />
  <div class="space-y-3">
    
<p class="">N.B. Roar’s JSON API support is now provided <a href="https://github.com/trailblazer/roar-jsonapi" class="underline text-purple">as a separate gem</a>.</p>

  </div>
</div>

<h2 id="roar-basic-usage" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Basic Usage</span></h2>

<p class="">By including <code class="text-purple">Roar::JSON::JSONAPI.resource</code> into your representer a handful of additional DSL methods get imported.</p>

<p class="">Here’s a basic example of a JSON API representer.</p>

<pre><code>class ArticleDecorator &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :articles

  # top-level link.
  link :self, toplevel: true do
    "//articles"
  end

  attributes do
    property :title
  end

  # resource object links
  link(:self) { "http://#{represented.class}/#{represented.id}" }

  # relationships
  has_one :author, class: Author, populator: ::Representable::FindOrInstantiate do # populator is for parsing, only.
    type :authors

    attributes do
      property :email
    end

    link(:self) { "http://authors/#{represented.id}" }
  end

  has_many :comments, class: Comment, decorator: CommentDecorator
end
</code></pre>

<p class="">As JSON API per definition can represent singular models and collections you have two entry points.</p>

<pre><code class="language-ruby">SongsRepresenter.new(Song.find(1)).to_json
SongsRepresenter.new(Song.new).from_json("..")
</code></pre>

<pre><code class="language-ruby">SongsRepresenter.for_collection.new([Song.find(1), Song.find(2)]).to_json
SongsRepresenter.for_collection.new([Song.new, Song.new]).from_json("..")
</code></pre>

<h2 id="roar-resource-objects" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Resource Objects</span></h2>

<p class=""><a href="http://jsonapi.org/format/#document-resource-objects" class="underline text-purple">→ specification</a></p>

<p class="">JSON API Resource Objects must contain an <code class="text-purple">id</code> and <code class="text-purple">type</code> member. You specify
the <code class="text-purple">type</code> when you include <code class="text-purple">Roar::JSON::JSONAPI.resource(type)</code>:</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  # ...
end
</code></pre>

<p class="">You do not need to specify an <code class="text-purple">id</code>. An <code class="text-purple">id</code> property will be created for you
automatically. However, if your represented object uses a method other than <code class="text-purple">id</code>
to represent its <code class="text-purple">id</code>, you must specify this with the <code class="text-purple">id_key:</code> option on
inclusion:</p>

<pre><code>class Song
  attr_accessor :song_id
end

class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs, id_key: :song_id

  # ...
end
</code></pre>

<h2 id="roar-attributes" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Attributes</span></h2>

<p class=""><a href="http://jsonapi.org/format/#document-resource-object-attributes" class="underline text-purple">→ specification</a></p>

<p class="">Attributes should be defined with <code class="text-purple">::property</code> in an <code class="text-purple">::attributes</code> block.</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  attributes do
    property :title
  end
end
</code></pre>

<h2 id="roar-relationships" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Relationships</span></h2>

<p class=""><a href="http://jsonapi.org/format/#document-resource-object-relationships" class="underline text-purple">→ specification</a></p>

<p class="">To define relationships, use <code class="text-purple">::has_one</code> or <code class="text-purple">::has_many</code> with either an <a href="#inline-representer" class="underline text-purple">inline representer</a> or an <a href="#explicit-representer" class="underline text-purple">explicit, standalone representer</a> (specified with the <code class="text-purple">decorates:</code> or <code class="text-purple">extend:</code> option).</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  has_one :album, class: Album do
    property :title
  end

  has_many :musicians, class: Musician, decorator: MusiciansRepresenter
end
</code></pre>

<p class="">You are able to define links and meta information for a given relationship in a
<code class="text-purple">::relationship</code> block:</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  has_many :musicians, class: Musician, decorator: MusiciansRepresenter do
    relationship do
      link(:self)     { "/songs/#{represented.id}/relationships/musicians" }
      link(:related)  { "/songs/#{represented.id}/musicians" }
    end
  end
end
</code></pre>

<h2 id="roar-member-names" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Member Names</span></h2>

<p class=""><a href="http://jsonapi.org/format/#document-member-names" class="underline text-purple">→ specification</a></p>

<p class="">By default, member names will be rendered according to JSON API <strong>recommendations</strong>:
only non-reserved, URL safe characters specified in RFC 3986 will be used.
Following JSON API conventions, underscores will also be replaced by hyphens.</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  attributes do
    property :song_title        # rendered as song-title
    property :lyric_writer, as: :lyricist
  end

  has_one :album, class: Album do
    property :release_date    # rendered as release-date
  end
end
</code></pre>

<p class="">If you want less-strict behaviour (such as allowing non-ASCII Unicode
characters), you can override this default:</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  defaults do |name, _|
    { as: JSONAPI::MemberName.(name, strict: false) }
  end

  attributes do
    property :titel_des_Liedes    # rendered as titel_des_Liedes
    property :Klavierstück        # rendered as Klavierstück
  end
end
</code></pre>

<h2 id="roar-meta-information" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Meta information</span></h2>

<p class=""><a href="http://jsonapi.org/format/#document-meta" class="underline text-purple">→ specification</a></p>

<p class="">Meta information can be included into rendered singular and collection documents in two ways.</p>

<p class="">You can define meta information on your collection object and then let Roar compile it.</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  meta toplevel: true do
    property :page
    property :total
  end
end
</code></pre>

<p class="">Your collection object must expose the respective methods.</p>

<pre><code class="language-ruby">collection.page  #=&gt; 1
collection.total #=&gt; 12
</code></pre>

<p class="">This will render the <code class="text-purple">{"meta": {"page": 1, "total": 12}}</code> hash into the JSON API document.</p>

<p class="">Alternatively, you can provide meta information as a hash when rendering.  Any values also defined on your object will be overriden.</p>

<pre><code class="language-ruby">collection.to_json(meta: {page: params["page"], total: collection.size})
</code></pre>

<p class="">Both methods work for singular documents too.</p>

<pre><code>class SongsRepresenter &lt; Roar::Decorator
  include Roar::JSON::JSONAPI.resource :songs

  meta do
    property :label
    property :format
  end
end
</code></pre>

<pre><code class="language-ruby">song.to_json(meta: { label: 'EMI' })
</code></pre>

<h2 id="roar-compound-document" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Compound Document</span></h2>

<p class="">You can suppress rendering of the compound document using the <code class="text-purple">:included</code> option.</p>

<pre><code>decorator.to_json(included: false)
</code></pre>

<h2 id="roar-sparse-fieldsets" class="text-2xl font-bold text-neutral-500 lg:text-3xl py-2 flex items-center"><span class="header-text">Sparse Fieldsets</span></h2>

<p class="">As per specification, JSON API allows the rendering of arbitrary fields to be suppressed. This feature is called <a href="http://jsonapi.org/format/#fetching-sparse-fieldsets" class="underline text-purple">sparse fieldsets</a>.</p>

<p class="">With Roar, you can do that with all kinds of resource objects: Filtering attributes works for the top “primary data” and for the compound object.</p>

<p class="">For the primary data, you simply provide what to include via the <code class="text-purple">:fields</code> option.</p>

<pre><code>decorator.to_hash(
  fields: { articles: [:title] }
)
</code></pre>

<p class="">This will only render the two mandatory <code class="text-purple">:id</code>, <code class="text-purple">:type</code> members and the  <code class="text-purple">:title</code> attribute.</p>

<pre><code>"data": {
  "type": "articles",
  "id": "1",
  "attributes": {"title": "My Article"}
}
</code></pre>

<p class="">To include particular fields, only, in the compound document, use <code class="text-purple">:fields</code>.</p>

<pre><code>decorator.to_hash(
  include: [:author],
  fields: { articles: [:title], author: [:email] }
)
</code></pre>

<p class="">You can control what types should be included in the compound document by adding them to <code class="text-purple">:include</code>.</p>

<p class="">The <code class="text-purple">:fields</code> option allows to specify what attributes for what type to include.</p>

<pre><code>"data": {
  "type": "articles",
  "id": "1",
  "attributes": {"title": "My Article"}
},
"included": [
  {
    "type": "author",
    "id":   "a:1",
    "attributes": {
      "email": "celsito@trb.to"
    }
  }
]
</code></pre>

<p class="">Note that the <code class="text-purple">author</code> fragment only contains the <code class="text-purple">email</code> in its attributes.</p>

<p class="">The <code class="text-purple">to_json</code> API is designed to be able to process <code class="text-purple">params</code> directly, where JSON API parameters like <code class="text-purple">fields</code> from the request URL are parsed into hashes and arrays.</p>

<pre><code>uri = Addressable::URI.parse('/articles?include=author&amp;fields%5Barticles%5D=title,body&amp;fields%5Bpeople%5D=name')
=&gt; {"include"=&gt;"author", "fields[articles]"=&gt;"title,body", "fields[people]"=&gt;"name"}

query = Rack::Utils.parse_nested_query(uri.query)
=&gt; {"include"=&gt;"author", "fields"=&gt;{"articles"=&gt;"title,body", "people"=&gt;"name"}}

representer.to_json(include: query['include'], fields: query['fields'])
</code></pre>

        </div>

            <!-- 5.5rem is lg navbar height -->
        <div class="bg-white h-screen w-56 sticky top-[5.5rem]" id="right-toc">
          <div id="docsearch" class="flex flex-col w-[203px] pt-5"></div>

          <div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-basic-usage">
  <h4 class="font-base font-bold leading-10 pl-2">
     Basic Usage
  </h4>

  
</div>


<div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-resource-objects">
  <h4 class="font-base font-bold leading-10 pl-2">
     Resource Objects
  </h4>

  
</div>


<div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-attributes">
  <h4 class="font-base font-bold leading-10 pl-2">
     Attributes
  </h4>

  
</div>


<div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-relationships">
  <h4 class="font-base font-bold leading-10 pl-2">
     Relationships
  </h4>

  
</div>


<div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-member-names">
  <h4 class="font-base font-bold leading-10 pl-2">
     Member Names
  </h4>

  
</div>


<div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-meta-information">
  <h4 class="font-base font-bold leading-10 pl-2">
     Meta information
  </h4>

  
</div>


<div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-compound-document">
  <h4 class="font-base font-bold leading-10 pl-2">
     Compound Document
  </h4>

  
</div>


<div class="display_none bg-white p-5 w-56 shrink-0 text-bg-blue overflow-y-scroll top-22 toc-right-height" id="right-toc-roar-sparse-fieldsets">
  <h4 class="font-base font-bold leading-10 pl-2">
     Sparse Fieldsets
  </h4>

  
</div>


        </div>
      </div>
    </div>
  </div>
</section>


<footer class="lg:text-left bg-bg-blue py-16 text-white text-center text-base">
  <div class="lg:flex justify-between w-11/12 max-w-[80rem] mx-auto">
    <div class="lg:flex lg:flex-col lg:justify-between">
      <a href="/2.1/" class="block shrink-0 w-fit mx-auto lg:mx-0" >
        <img class="w-48" src="/assets/logo_white_ruby-01c45713d0879788514c52d65ac53e92d7735b42cec0baf6e080b08f9a0fb595.svg" />
      </a>
      <div class="lg:block hidden">
        © 2023 Trailblazer GmbH

      </div>
    </div>
    <div class="lg:flex lg:gap-20 xl:gap-40">
      <div class="lg:mt-0 flex flex-col gap-5 mt-15">
        <a class="font-bold text-xl" href="/2.1/docs/trailblazer/">Documentation</a>
        <a href="/2.1/docs/trailblazer/#trailblazer-learn-trailblazer-tales">Videos</a>
        <a href="/2.1/docs/trailblazer/">API</a>
        <a href="/2.1/docs/operation/">Operation</a>
      </div>
      <div class="lg:mt-0 flex flex-col gap-5 mt-15">
        <a class="font-bold text-xl" href="/2.1/about/">About us</a>
        <div class="flex items-center">
          <a href="https://www.linkedin.com/company/trailblazer-gmbh/">LinkedIn</a>
          <a href="https://www.linkedin.com/company/trailblazer-gmbh/">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="fill-white pl-2" height="1.3em"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
          </a>
        </div>
        <a href="https://dev.to/trailblazer">Blog</a>
        <a href="/2.1/about/">Trailblazer GmbH</a>
        <a href="/2.1/pro/">Trailblazer PRO</a>
      </div>
      <div class="lg:mt-0 flex flex-col gap-5 mt-15">
        <a class="font-bold text-xl" href="https://trailblazer.zulipchat.com">Help</a>
        <a href="https://trailblazer.zulipchat.com">Chat</a>
        <a href="http://eepurl.com/hHE3a5">Newsletter</a>
      </div>
    </div>
  </div>
  <div class="lg:hidden mt-15">
    © 2023 Trailblazer GmbH
  </div>
</footer>


  </body>
</html>
